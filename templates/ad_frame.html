<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Ad Container</title>
    <meta http-equiv="Content-Security-Policy"
        content="default-src 'self' https:; script-src 'self' https: 'unsafe-inline'; frame-ancestors *;">
    <style>
        body,
        html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
    </style>
</head>

<body>
    <script type="text/javascript">
        // Defensive overrides: by default we allow popups in dev. If you need to lock down,
        // call this page without ?dev=1 and implement stricter policies.
        try {
            const urlParams = new URLSearchParams(window.location.search);
            const isDev = urlParams.get('dev') === '1';
            if (!isDev) {
                // production: keep stronger protections (but be careful as many ad providers need popups)
                window.open = function () { console.warn('window.open blocked'); return null; };
                window.top = window;
                window.parent = window;
                window.location.replace = function () { console.warn('navigation blocked'); };
                window.postMessage = function () { console.warn('postMessage blocked'); };
            } else {
                console.log('ad_frame in dev mode: popups and navigation allowed for testing');
            }
        } catch (e) { console.warn('defensive overrides failed', e); }

        // احصل على رابط السكربت من عنوان الصفحة
        const urlParams = new URLSearchParams(window.location.search);
        const adScriptSrc = urlParams.get('script');

        if (adScriptSrc) {
            // قم بإنشاء وإضافة سكربت الإعلان إلى الصفحة
            const script = document.createElement('script');
            script.type = 'text/javascript';
            script.src = decodeURIComponent(adScriptSrc);
            script.async = true;
            script.onerror = function (e) { console.error('ad script failed to load', e); };
            document.body.appendChild(script);
        }
    </script>
</body>

</html>